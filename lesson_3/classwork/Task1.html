<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Taks 1</title>
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="wrap" id="wrap">
        <h1>Добавление списка элементов по условию</h1>

        <header>
          <input type="text" placeholder="" id="Receiver"/>
          <input type="submit" value="Add" id="AddToList"/>
        </header>

        <div>
          <div id="error">

          </div>
          <ul id="list">

          </ul>
        </div>

    </div>
    <script>
      /*
        Задание:

          Написать скрипт, который будет добавлять введеный в инпут Receiver текст
          в список list.
          Если в списке больше 5 записей, убирать Event с кнопки AddToList.
          Кнопке AddToList добавить disabled = true

          После каждого ввода очищать значение инпута

          Используемые методы:

          addEventListener
          removeEventListener

          document.getElementById
          document.createElement

          element.innerText
          element.setAttribute
          element.appendChild

          Получить значение инпута: Receiver.value [Receiver - это id]

      */
      const MAX_ITEMS = 5;
      const btnAddToList = document.getElementById('AddToList');
      const textInput = document.getElementById('Receiver');
      const result = document.getElementById('list');
      const errorContainer = document.getElementById('error');

      btnAddToList.addEventListener('click', addItem);

      function addItem() {
	      if (result.childElementCount === MAX_ITEMS) { // check items count
		      errorContainer.innerText = `Max limit ${MAX_ITEMS} items`;
		      btnAddToList.removeEventListener('click', addItem);
		      btnAddToList.disabled = true;
		      return;
	      }

	      const inputValue = textInput.value; // get input text
	      if ('' === inputValue) { // check input value
		      errorContainer.innerText = `Item text can not be blank`;
		      return;
	      }

	      errorContainer.innerText = ''; // clean old errors

	      const newItem = document.createElement('li');
	      textInput.value = ''; // clean old data
	      newItem.innerText = inputValue;
	      result.appendChild(newItem);
      }

    </script>
  </body>


</html>
