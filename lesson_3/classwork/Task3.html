<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Task 3</title>
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="wrap" id="wrap">
      <h1>Переключение слайдера</h1>
      <div class="roadMap__container yellow">
        <button class="navButton" data-direction="<"> Prev </button>
        <div class="roadMap">
          <div class="roadMapPoint"></div>
          <div class="roadMapPoint ball"></div>
          <div class="roadMapPoint"></div>
          <div class="roadMapPoint"></div>
          <div class="roadMapPoint"></div>
          <div class="roadMapPoint"></div>
          <div class="roadMapPoint"></div>
          <div class="roadMapPoint"></div>
        </div>
        <button class="navButton" data-direction=">"> Next </button>
      </div>

      <div class="roadMap__container red">
        <button class="navButton" data-direction="<"> Prev </button>
        <div class="roadMap">
          <div class="roadMapPoint"></div>
          <div class="roadMapPoint"></div>
          <div class="roadMapPoint ball"></div>
          <div class="roadMapPoint"></div>
        </div>
        <button class="navButton" data-direction=">"> Next </button>
      </div>

      <div class="roadMap__container blue">
        <button class="navButton" data-direction="<"> Prev </button>
        <div class="roadMap">
          <div class="roadMapPoint"></div>
          <div class="roadMapPoint ball"></div>
          <div class="roadMapPoint"></div>
          <div class="roadMapPoint"></div>
        </div>
        <button class="navButton" data-direction=">"> Next </button>
      </div>


      <div class="roadMap__container red">
          <button class="navButton" data-direction="<"> Prev </button>
          <div class="roadMap">
            <div class="roadMapPoint"></div>
            <div class="roadMapPoint"></div>
            <div class="roadMapPoint ball"></div>
            <div class="roadMapPoint"></div>
          </div>
          <button class="navButton" data-direction=">"> Next </button>
        </div>
  
        <div class="roadMap__container blue">
          <button class="navButton" data-direction="<"> Prev </button>
          <div class="roadMap">
            <div class="roadMapPoint"></div>
            <div class="roadMapPoint ball"></div>
            <div class="roadMapPoint"></div>
            <div class="roadMapPoint"></div>
          </div>
          <button class="navButton" data-direction=">"> Next </button>
        </div>

    </div>
    <script>

      /*
        Задание:

        Написать скрипт, который будет приводить в действие переключалки из разметки.
        И будет перемещать класс ball по точкам в зависимости от нажатой кнопки
      */

      // add event for all buttons
      const buttons = document.querySelectorAll('.navButton');
      buttons.forEach(button => {
	      button.addEventListener('click', moveBoll);
      });

      // move class "ball" to next element
      function moveBoll() {
      	const mode = this.dataset.direction;
      	const pointsContainer = this.closest('.roadMap__container');
      	const roadMap = pointsContainer.querySelector('.roadMap');
      	const currentPoint = roadMap.querySelector('.roadMapPoint.ball');
      	const nextPoint = ('>' === mode) ? currentPoint.nextElementSibling || roadMap.firstElementChild : currentPoint.previousElementSibling || roadMap.lastElementChild;
	      nextPoint.classList.add('ball');
	      currentPoint.classList.remove('ball');
      }
    </script>
  </body>

</html>
